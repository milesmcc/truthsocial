{"version":3,"sources":["webpack:///./app/javascript/packs/admin.js"],"names":["batchCheckboxClassName","delegate","document","target","forEach","call","querySelectorAll","content","checked","checkAllElement","querySelector","every","indeterminate","some","element","click","form","submit","onDomainBlockSeverityChange","rejectMediaDiv","rejectReportsDiv","style","display","value","onEnableBootstrapTimelineAccountsChange","bootstrapTimelineAccountsField","disabled","parentElement","classList","remove","add","onChangeRegistrationMode","enabled","input","contains","ready","domainBlockSeverityInput","getElementById","enableBootstrapTimelineAccounts","registrationMode"],"mappings":"0FAAA,kCAIMA,EAAyB,yCAE/BC,mBAASC,SAAU,sBAAuB,UAAU,YAAiB,IAAdC,EAAa,EAAbA,OACrD,GAAGC,QAAQC,KAAKH,SAASI,iBAAiBN,IAAyB,SAACO,GAClEA,EAAQC,QAAUL,EAAOK,cAI7BP,mBAASC,SAAUF,EAAwB,UAAU,WACnD,IAAMS,EAAkBP,SAASQ,cAAc,uBAE3CD,IACFA,EAAgBD,QAAU,GAAGG,MAAMN,KAAKH,SAASI,iBAAiBN,IAAyB,SAACO,GAAD,OAAaA,EAAQC,WAChHC,EAAgBG,eAAiBH,EAAgBD,SAAW,GAAGK,KAAKR,KAAKH,SAASI,iBAAiBN,IAAyB,SAACO,GAAD,OAAaA,EAAQC,eAIrJP,mBAASC,SAAU,6BAA8B,SAAS,WACxD,GAAGE,QAAQC,KAAKH,SAASI,iBAAiB,yBAAyB,SAACQ,GAClEA,EAAQC,cAIZd,mBAASC,SAAU,6BAA8B,SAAS,WACxD,GAAGE,QAAQC,KAAKH,SAASI,iBAAiB,mDAAmD,SAACQ,GAC5FA,EAAQC,cAIZd,mBAASC,SAAU,qCAAsC,UAAU,YAAgB,EAAbC,OAC7Da,KAAKC,YAGd,IAAMC,EAA8B,SAACf,GACnC,IAAMgB,EAAmBjB,SAASQ,cAAc,+CAC1CU,EAAmBlB,SAASQ,cAAc,iDAE5CS,IACFA,EAAeE,MAAMC,QAA4B,YAAjBnB,EAAOoB,MAAuB,OAAS,SAGrEH,IACFA,EAAiBC,MAAMC,QAA4B,YAAjBnB,EAAOoB,MAAuB,OAAS,UAI7EtB,mBAASC,SAAU,yBAA0B,UAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBe,EAA4Bf,MAEnG,IAAMqB,EAA0C,SAACrB,GAC/C,IAAMsB,EAAiCvB,SAASQ,cAAc,oDAE1De,IACFA,EAA+BC,UAAYvB,EAAOK,QAC9CL,EAAOK,SACTiB,EAA+BE,cAAcC,UAAUC,OAAO,YAC9DJ,EAA+BE,cAAcA,cAAcC,UAAUC,OAAO,cAE5EJ,EAA+BE,cAAcC,UAAUE,IAAI,YAC3DL,EAA+BE,cAAcA,cAAcC,UAAUE,IAAI,eAK/E7B,mBAASC,SAAU,0DAA2D,UAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBqB,EAAwCrB,MAEhJ,IAAM4B,EAA2B,SAAC5B,GAChC,IAAM6B,EAA2B,aAAjB7B,EAAOoB,MAEvB,GAAGnB,QAAQC,KAAKH,SAASI,iBAAiB,6CAA6C,SAAC2B,GAEtF,GADAA,EAAMP,UAAYM,EACdA,EAAS,CACX,IAAIlB,EAAUmB,EACd,GACEnB,EAAQc,UAAUC,OAAO,YACzBf,EAAUA,EAAQa,oBACXb,IAAYA,EAAQc,UAAUM,SAAS,qBAC3C,CACL,IAAIpB,EAAUmB,EACd,GACEnB,EAAQc,UAAUE,IAAI,YACtBhB,EAAUA,EAAQa,oBACXb,IAAYA,EAAQc,UAAUM,SAAS,sBAKtDjC,mBAASC,SAAU,0CAA2C,UAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB4B,EAAyB5B,MAEjHgC,mBAAM,WACJ,IAAMC,EAA2BlC,SAASmC,eAAe,yBACrDD,GAA0BlB,EAA4BkB,GAE1D,IAAME,EAAkCpC,SAASmC,eAAe,0DAC5DC,GAAiCd,EAAwCc,GAE7E,IAAMC,EAAmBrC,SAASmC,eAAe,0CAC7CE,GAAkBR,EAAyBQ,Q","file":"js/admin-7fe24e0d119ff92d71d4.chunk.js","sourcesContent":["import './public-path';\nimport { delegate } from '@rails/ujs';\nimport ready from '../mastodon/ready';\n\nconst batchCheckboxClassName = '.batch-checkbox input[type=\"checkbox\"]';\n\ndelegate(document, '#batch_checkbox_all', 'change', ({ target }) => {\n  [].forEach.call(document.querySelectorAll(batchCheckboxClassName), (content) => {\n    content.checked = target.checked;\n  });\n});\n\ndelegate(document, batchCheckboxClassName, 'change', () => {\n  const checkAllElement = document.querySelector('#batch_checkbox_all');\n\n  if (checkAllElement) {\n    checkAllElement.checked = [].every.call(document.querySelectorAll(batchCheckboxClassName), (content) => content.checked);\n    checkAllElement.indeterminate = !checkAllElement.checked && [].some.call(document.querySelectorAll(batchCheckboxClassName), (content) => content.checked);\n  }\n});\n\ndelegate(document, '.media-spoiler-show-button', 'click', () => {\n  [].forEach.call(document.querySelectorAll('button.media-spoiler'), (element) => {\n    element.click();\n  });\n});\n\ndelegate(document, '.media-spoiler-hide-button', 'click', () => {\n  [].forEach.call(document.querySelectorAll('.spoiler-button.spoiler-button--visible button'), (element) => {\n    element.click();\n  });\n});\n\ndelegate(document, '.filter-subset--with-select select', 'change', ({ target }) => {\n  target.form.submit();\n});\n\nconst onDomainBlockSeverityChange = (target) => {\n  const rejectMediaDiv   = document.querySelector('.input.with_label.domain_block_reject_media');\n  const rejectReportsDiv = document.querySelector('.input.with_label.domain_block_reject_reports');\n\n  if (rejectMediaDiv) {\n    rejectMediaDiv.style.display = (target.value === 'suspend') ? 'none' : 'block';\n  }\n\n  if (rejectReportsDiv) {\n    rejectReportsDiv.style.display = (target.value === 'suspend') ? 'none' : 'block';\n  }\n};\n\ndelegate(document, '#domain_block_severity', 'change', ({ target }) => onDomainBlockSeverityChange(target));\n\nconst onEnableBootstrapTimelineAccountsChange = (target) => {\n  const bootstrapTimelineAccountsField = document.querySelector('#form_admin_settings_bootstrap_timeline_accounts');\n\n  if (bootstrapTimelineAccountsField) {\n    bootstrapTimelineAccountsField.disabled = !target.checked;\n    if (target.checked) {\n      bootstrapTimelineAccountsField.parentElement.classList.remove('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.remove('disabled');\n    } else {\n      bootstrapTimelineAccountsField.parentElement.classList.add('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.add('disabled');\n    }\n  }\n};\n\ndelegate(document, '#form_admin_settings_enable_bootstrap_timeline_accounts', 'change', ({ target }) => onEnableBootstrapTimelineAccountsChange(target));\n\nconst onChangeRegistrationMode = (target) => {\n  const enabled = target.value === 'approved';\n\n  [].forEach.call(document.querySelectorAll('#form_admin_settings_require_invite_text'), (input) => {\n    input.disabled = !enabled;\n    if (enabled) {\n      let element = input;\n      do {\n        element.classList.remove('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    } else {\n      let element = input;\n      do {\n        element.classList.add('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    }\n  });\n};\n\ndelegate(document, '#form_admin_settings_registrations_mode', 'change', ({ target }) => onChangeRegistrationMode(target));\n\nready(() => {\n  const domainBlockSeverityInput = document.getElementById('domain_block_severity');\n  if (domainBlockSeverityInput) onDomainBlockSeverityChange(domainBlockSeverityInput);\n\n  const enableBootstrapTimelineAccounts = document.getElementById('form_admin_settings_enable_bootstrap_timeline_accounts');\n  if (enableBootstrapTimelineAccounts) onEnableBootstrapTimelineAccountsChange(enableBootstrapTimelineAccounts);\n\n  const registrationMode = document.getElementById('form_admin_settings_registrations_mode');\n  if (registrationMode) onChangeRegistrationMode(registrationMode);\n});\n"],"sourceRoot":""}