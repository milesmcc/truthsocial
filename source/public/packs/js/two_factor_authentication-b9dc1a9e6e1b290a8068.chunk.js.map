{"version":3,"sources":["webpack:///./node_modules/@github/webauthn-json/dist/main/webauthn-json.js","webpack:///./app/javascript/packs/two_factor_authentication.js"],"names":["_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","call","next","bind","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","done","value","TypeError","arr","len","arr2","e","t","replace","r","atob","ArrayBuffer","c","Uint8Array","_e","charCodeAt","_step","_iterator","_e2","String","fromCharCode","btoa","map","_o","_i","_Object$entries","entries","_Object$entries$_i","_c","_i2","schema","required","Error","type","id","transports","appid","appidExclude","credProps","a","s","publicKey","rp","user","displayName","challenge","pubKeyCredParams","timeout","excludeCredentials","authenticatorSelection","attestation","extensions","signal","p","rawId","response","clientDataJSON","attestationObject","clientExtensionResults","l","mediation","rpId","allowCredentials","userVerification","u","authenticatorData","signature","userHandle","_create","regeneratorRuntime","mark","_callee","wrap","_context","prev","t0","getClientExtensionResults","navigator","credentials","create","t1","sent","abrupt","stop","apply","this","arguments","_get","_callee2","_context2","get","hideFlashMessages","document","getElementsByClassName","forEach","flashMessage","classList","add","callback","url","body","CSRFSelector","axios","post","JSON","stringify","headers","querySelector","getAttribute","then","window","location","data","redirect_path","catch","error","status","getElementById","remove","console","ready","PublicKeyCredential","unsupported_browser_message","disabled","webAuthnCredentialRegistrationForm","addEventListener","event","preventDefault","nickname","target","_x","WebAuthnJSON","credential","focus","webAuthnCredentialAuthenticationForm","_x2","otpAuthenticationForm"],"mappings":"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","file":"js/two_factor_authentication-b9dc1a9e6e1b290a8068.chunk.js","sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction e(e) {\n  var t = \"==\".slice(0, (4 - e.length % 4) % 4),\n      n = e.replace(/-/g, \"+\").replace(/_/g, \"/\") + t,\n      r = atob(n),\n      o = new ArrayBuffer(r.length),\n      c = new Uint8Array(o);\n\n  for (var _e = 0; _e < r.length; _e++) {\n    c[_e] = r.charCodeAt(_e);\n  }\n\n  return o;\n}\n\nfunction t(e) {\n  var t = new Uint8Array(e);\n  var n = \"\";\n\n  for (var _iterator = _createForOfIteratorHelperLoose(t), _step; !(_step = _iterator()).done;) {\n    var _e2 = _step.value;\n    n += String.fromCharCode(_e2);\n  }\n\n  return btoa(n).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\n\nfunction n(e, t, r) {\n  if (\"copy\" === t) return r;\n  if (\"convert\" === t) return e(r);\n  if (t instanceof Array) return r.map(function (r) {\n    return n(e, t[0], r);\n  });\n\n  if (t instanceof Object) {\n    var _o = {};\n\n    for (var _i = 0, _Object$entries = Object.entries(t); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _Object$entries[_i],\n          _c = _Object$entries$_i[0],\n          _i2 = _Object$entries$_i[1];\n      if (_c in r) null != r[_c] ? _o[_c] = n(e, _i2.schema, r[_c]) : _o[_c] = null;else if (_i2.required) throw new Error(\"Missing key: \" + _c);\n    }\n\n    return _o;\n  }\n}\n\nfunction r(e) {\n  return {\n    required: !0,\n    schema: e\n  };\n}\n\nfunction o(e) {\n  return {\n    required: !1,\n    schema: e\n  };\n}\n\nvar c = {\n  type: r(\"copy\"),\n  id: r(\"convert\"),\n  transports: o(\"copy\")\n},\n    i = {\n  appid: o(\"copy\"),\n  appidExclude: o(\"copy\"),\n  credProps: o(\"copy\")\n},\n    a = {\n  appid: o(\"copy\"),\n  appidExclude: o(\"copy\"),\n  credProps: o(\"copy\")\n},\n    s = {\n  publicKey: r({\n    rp: r(\"copy\"),\n    user: r({\n      id: r(\"convert\"),\n      name: r(\"copy\"),\n      displayName: r(\"copy\")\n    }),\n    challenge: r(\"convert\"),\n    pubKeyCredParams: r(\"copy\"),\n    timeout: o(\"copy\"),\n    excludeCredentials: o([c]),\n    authenticatorSelection: o(\"copy\"),\n    attestation: o(\"copy\"),\n    extensions: o(i)\n  }),\n  signal: o(\"copy\")\n},\n    p = {\n  type: r(\"copy\"),\n  id: r(\"copy\"),\n  rawId: r(\"convert\"),\n  response: r({\n    clientDataJSON: r(\"convert\"),\n    attestationObject: r(\"convert\")\n  }),\n  clientExtensionResults: r(a)\n},\n    l = {\n  mediation: o(\"copy\"),\n  publicKey: r({\n    challenge: r(\"convert\"),\n    timeout: o(\"copy\"),\n    rpId: o(\"copy\"),\n    allowCredentials: o([c]),\n    userVerification: o(\"copy\"),\n    extensions: o(i)\n  }),\n  signal: o(\"copy\")\n},\n    u = {\n  type: r(\"copy\"),\n  id: r(\"copy\"),\n  rawId: r(\"convert\"),\n  response: r({\n    clientDataJSON: r(\"convert\"),\n    authenticatorData: r(\"convert\"),\n    signature: r(\"convert\"),\n    userHandle: r(\"convert\")\n  }),\n  clientExtensionResults: r(a)\n};\nexport var schema = {\n  credentialCreationOptions: s,\n  publicKeyCredentialWithAttestation: p,\n  credentialRequestOptions: l,\n  publicKeyCredentialWithAssertion: u\n};\nexport function create(_x) {\n  return _create.apply(this, arguments);\n}\n\nfunction _create() {\n  _create = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(r) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = function (e) {\n              var r = e;\n              return r.clientExtensionResults = e.getClientExtensionResults(), n(t, p, r);\n            };\n\n            _context.next = 3;\n            return navigator.credentials.create(function (t) {\n              return n(e, s, t);\n            }(r));\n\n          case 3:\n            _context.t1 = _context.sent;\n            return _context.abrupt(\"return\", (0, _context.t0)(_context.t1));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _create.apply(this, arguments);\n}\n\nexport function get(_x2) {\n  return _get.apply(this, arguments);\n}\n\nfunction _get() {\n  _get = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(r) {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.t0 = function (e) {\n              var r = e;\n              return r.clientExtensionResults = e.getClientExtensionResults(), n(t, u, r);\n            };\n\n            _context2.next = 3;\n            return navigator.credentials.get(function (t) {\n              return n(e, l, t);\n            }(r));\n\n          case 3:\n            _context2.t1 = _context2.sent;\n            return _context2.abrupt(\"return\", (0, _context2.t0)(_context2.t1));\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _get.apply(this, arguments);\n}\n\nexport function supported() {\n  return !!(navigator.credentials && navigator.credentials.create && navigator.credentials.get && window.PublicKeyCredential);\n}","import axios from 'axios';\nimport * as WebAuthnJSON from '@github/webauthn-json';\nimport ready from '../mastodon/ready';\nimport 'regenerator-runtime/runtime';\n\nfunction getCSRFToken() {\n  var CSRFSelector = document.querySelector('meta[name=\"csrf-token\"]');\n  if (CSRFSelector) {\n    return CSRFSelector.getAttribute('content');\n  } else {\n    return null;\n  }\n}\n\nfunction hideFlashMessages() {\n  Array.from(document.getElementsByClassName('flash-message')).forEach(function(flashMessage) {\n    flashMessage.classList.add('hidden');\n  });\n}\n\nfunction callback(url, body) {\n  axios.post(url, JSON.stringify(body), {\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'X-CSRF-Token': getCSRFToken(),\n    },\n    credentials: 'same-origin',\n  }).then(function(response) {\n    window.location.replace(response.data.redirect_path);\n  }).catch(function(error) {\n    if (error.response.status === 422) {\n      const errorMessage = document.getElementById('security-key-error-message');\n      errorMessage.classList.remove('hidden');\n      console.error(error.response.data.error);\n    } else {\n      console.error(error);\n    }\n  });\n}\n\nready(() => {\n  if (!WebAuthnJSON.supported()) {\n    const unsupported_browser_message = document.getElementById('unsupported-browser-message');\n    if (unsupported_browser_message) {\n      unsupported_browser_message.classList.remove('hidden');\n      document.querySelector('.btn.js-webauthn').disabled = true;\n    }\n  }\n\n\n  const webAuthnCredentialRegistrationForm = document.getElementById('new_webauthn_credential');\n  if (webAuthnCredentialRegistrationForm) {\n    webAuthnCredentialRegistrationForm.addEventListener('submit', (event) => {\n      event.preventDefault();\n\n      var nickname = event.target.querySelector('input[name=\"new_webauthn_credential[nickname]\"]');\n      if (nickname.value) {\n        axios.get('/settings/security_keys/options')\n          .then((response) => {\n            const credentialOptions = response.data;\n\n            WebAuthnJSON.create({ 'publicKey': credentialOptions }).then((credential) => {\n              var params = { 'credential': credential, 'nickname': nickname.value };\n              callback('/settings/security_keys', params);\n            }).catch((error) => {\n              const errorMessage = document.getElementById('security-key-error-message');\n              errorMessage.classList.remove('hidden');\n              console.error(error);\n            });\n          }).catch((error) => {\n            console.error(error.response.data.error);\n          });\n      } else {\n        nickname.focus();\n      }\n    });\n  }\n\n  const webAuthnCredentialAuthenticationForm = document.getElementById('webauthn-form');\n  if (webAuthnCredentialAuthenticationForm) {\n    webAuthnCredentialAuthenticationForm.addEventListener('submit', (event) => {\n      event.preventDefault();\n\n      axios.get('sessions/security_key_options')\n        .then((response) => {\n          const credentialOptions = response.data;\n\n          WebAuthnJSON.get({ 'publicKey': credentialOptions }).then((credential) => {\n            var params = { 'user': { 'credential': credential } };\n            callback('sign_in', params);\n          }).catch((error) => {\n            const errorMessage = document.getElementById('security-key-error-message');\n            errorMessage.classList.remove('hidden');\n            console.error(error);\n          });\n        }).catch((error) => {\n          console.error(error.response.data.error);\n        });\n    });\n\n    const otpAuthenticationForm = document.getElementById('otp-authentication-form');\n\n    const linkToOtp = document.getElementById('link-to-otp');\n    linkToOtp.addEventListener('click', () => {\n      webAuthnCredentialAuthenticationForm.classList.add('hidden');\n      otpAuthenticationForm.classList.remove('hidden');\n      hideFlashMessages();\n    });\n\n    const linkToWebAuthn = document.getElementById('link-to-webauthn');\n    linkToWebAuthn.addEventListener('click', () => {\n      otpAuthenticationForm.classList.add('hidden');\n      webAuthnCredentialAuthenticationForm.classList.remove('hidden');\n      hideFlashMessages();\n    });\n  }\n});\n"],"sourceRoot":""}