(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{848:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var o,i,l,a,c=n(0),s=n(5),r=n(1),d=n.n(r),u=n(9),m=n(3),p=n(2),h=n.n(p),y=n(810),b=n(205),g=n(202),f=n(20),M=n(123),j=n(809),O=Object(m.g)(o=function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.settings,n=e.onChange;return Object(c.a)("div",{},void 0,Object(c.a)("div",{className:"column-settings__row"},void 0,Object(c.a)(j.a,{settings:t,settingPath:["other","onlyMedia"],onChange:n,label:Object(c.a)(m.b,{id:"community.column_settings.media_only",defaultMessage:"Media only"})}),Object(c.a)(j.a,{settings:t,settingPath:["other","onlyRemote"],onChange:n,label:Object(c.a)(m.b,{id:"community.column_settings.remote_only",defaultMessage:"Remote only"})})))},t}(d.a.PureComponent))||o,v=n(45),R=Object(u.connect)((function(e,t){var n=t.columnId,o=e.getIn(["settings","columns"]),i=o.findIndex((function(e){return e.get("uuid")===n}));return{settings:n&&i>=0?o.get(i).get("params"):e.getIn(["settings","public"])}}),(function(e,t){var n=t.columnId;return{onChange(t,o){e(n?Object(M.f)(n,t,o):Object(v.c)(["public"].concat(t),o))}}}))(O),I=n(209),w=Object(m.f)({title:{id:"column.public",defaultMessage:"Federated timeline"}}),C=Object(u.connect)((function(e,t){var n=t.columnId,o=n,i=e.getIn(["settings","columns"]),l=i.findIndex((function(e){return e.get("uuid")===o})),a=n&&l>=0?i.get(l).getIn(["params","other","onlyMedia"]):e.getIn(["settings","public","other","onlyMedia"]),c=n&&l>=0?i.get(l).getIn(["params","other","onlyRemote"]):e.getIn(["settings","public","other","onlyRemote"]),s=e.getIn(["timelines","public"+(a?":media":"")]);return{hasUnread:!!s&&s.get("unread")>0,onlyMedia:a,onlyRemote:c}}))(i=Object(m.g)((a=l=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).handlePin=function(){var e=t.props,n=e.columnId,o=e.dispatch,i=e.onlyMedia,l=e.onlyRemote;o(n?Object(M.h)(n):Object(M.e)(l?"REMOTE":"PUBLIC",{other:{onlyMedia:i,onlyRemote:l}}))},t.handleMove=function(e){var n=t.props,o=n.columnId;(0,n.dispatch)(Object(M.g)(o,e))},t.handleHeaderClick=function(){t.column.scrollTop()},t.setRef=function(e){t.column=e},t.handleLoadMore=function(e){var n=t.props,o=n.dispatch,i=n.onlyMedia,l=n.onlyRemote;o(Object(f.w)({maxId:e,onlyMedia:i,onlyRemote:l}))},t}Object(s.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.dispatch,n=e.onlyMedia,o=e.onlyRemote;t(Object(f.w)({onlyMedia:n,onlyRemote:o})),this.disconnect=t(Object(I.e)({onlyMedia:n,onlyRemote:o}))},n.componentDidUpdate=function(e){if(e.onlyMedia!==this.props.onlyMedia||e.onlyRemote!==this.props.onlyRemote){var t=this.props,n=t.dispatch,o=t.onlyMedia,i=t.onlyRemote;this.disconnect(),n(Object(f.w)({onlyMedia:o,onlyRemote:i})),this.disconnect=n(Object(I.e)({onlyMedia:o,onlyRemote:i}))}},n.componentWillUnmount=function(){this.disconnect&&(this.disconnect(),this.disconnect=null)},n.render=function(){var e=this.props,t=e.intl,n=e.shouldUpdateScroll,o=e.columnId,i=e.hasUnread,l=e.multiColumn,a=e.onlyMedia,s=e.onlyRemote,r=!!o;return d.a.createElement(b.a,{bindToDocument:!l,ref:this.setRef,label:t.formatMessage(w.title)},Object(c.a)(g.a,{icon:"globe",active:i,title:t.formatMessage(w.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:r,multiColumn:l},void 0,Object(c.a)(R,{columnId:o})),Object(c.a)(y.a,{timelineId:"public"+(s?":remote":"")+(a?":media":""),onLoadMore:this.handleLoadMore,trackScroll:!r,scrollKey:"public_timeline-"+o,emptyMessage:Object(c.a)(m.b,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"}),shouldUpdateScroll:n,bindToDocument:!l}))},t}(d.a.PureComponent),l.contextTypes={router:h.a.object},l.defaultProps={onlyMedia:!1},i=a))||i)||i}}]);
//# sourceMappingURL=public_timeline-03679096ae8b10d943ad.chunk.js.map