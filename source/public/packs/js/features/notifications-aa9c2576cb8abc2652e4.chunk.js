(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{844:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return kt}));var n,o,a,s,c,l,r,d,u,f,b,h=i(0),g=i(5),p=i(24),m=i.n(p),v=i(1),j=i.n(v),O=i(9),_=i(205),w=i(202),M=i(26),C=i(59),y=i(123),k=i(35),P=i(16),N=i.n(P),x=i(3),I=i(104),S=i(2),q=i.n(S),R=i(17),W=i(7),F=i(131),H=i(176),T=i(36),D=i(40),A=i(71),U=i(19),B=Object(x.f)({authorize:{id:"follow_request.authorize",defaultMessage:"Authorize"},reject:{id:"follow_request.reject",defaultMessage:"Reject"}}),L=Object(x.g)((a=o=function(t){function e(){return t.apply(this,arguments)||this}return Object(g.a)(e,t),e.prototype.render=function(){var t=this.props,e=t.intl,i=t.hidden,n=t.account,o=t.onAuthorize,a=t.onReject;return n?i?Object(h.a)(v.Fragment,{},void 0,n.get("display_name"),n.get("username")):Object(h.a)("div",{className:"account"},void 0,Object(h.a)("div",{className:"account__wrapper"},void 0,Object(h.a)(A.a,{className:"account__display-name",title:n.get("acct"),href:n.get("url"),to:"/accounts/"+n.get("id")},n.get("id"),Object(h.a)("div",{className:"account__avatar-wrapper"},void 0,Object(h.a)(T.a,{account:n,size:36})),Object(h.a)(D.a,{account:n})),Object(h.a)("div",{className:"account__relationship"},void 0,Object(h.a)(U.a,{title:e.formatMessage(B.authorize),icon:"check",onClick:o}),Object(h.a)(U.a,{title:e.formatMessage(B.reject),icon:"times",onClick:a})))):Object(h.a)("div",{})},e}(R.a),o.propTypes={account:N.a.map.isRequired,onAuthorize:q.a.func.isRequired,onReject:q.a.func.isRequired,intl:q.a.object.isRequired},n=a))||n,z=i(11),K=Object(O.connect)((function(){var t=Object(k.d)();return function(e,i){return{account:t(e,i.id)}}}),(function(t,e){var i=e.id;return{onAuthorize(){t(Object(z.H)(i))},onReject(){t(Object(z.U)(i))}}}))(L),E=i(13),Y=i(12),G=i.n(Y),J=Object(x.f)({favourite:{id:"notification.favourite",defaultMessage:"{name} favourited your status"},follow:{id:"notification.follow",defaultMessage:"{name} followed you"},ownPoll:{id:"notification.own_poll",defaultMessage:"Your poll has ended"},poll:{id:"notification.poll",defaultMessage:"A poll you have voted in has ended"},reblog:{id:"notification.reblog",defaultMessage:"{name} boosted your status"},status:{id:"notification.status",defaultMessage:"{name} just posted"}}),V=function(t,e,i){var n=[e];return n.push(t.formatDate(i,{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})),n.join(", ")},Q=Object(x.g)((l=c=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).handleMoveUp=function(){var t=e.props,i=t.notification;(0,t.onMoveUp)(i.get("id"))},e.handleMoveDown=function(){var t=e.props,i=t.notification;(0,t.onMoveDown)(i.get("id"))},e.handleOpen=function(){var t=e.props.notification;t.get("status")?e.context.router.history.push("/statuses/"+t.get("status")):e.handleOpenProfile()},e.handleOpenProfile=function(){var t=e.props.notification;e.context.router.history.push("/accounts/"+t.getIn(["account","id"]))},e.handleMention=function(t){t.preventDefault();var i=e.props,n=i.notification;(0,i.onMention)(n.get("account"),e.context.router.history)},e.handleHotkeyFavourite=function(){var t=e.props.status;t&&e.props.onFavourite(t)},e.handleHotkeyBoost=function(t){var i=e.props.status;i&&e.props.onReblog(i,t)},e.handleHotkeyToggleHidden=function(){var t=e.props.status;t&&e.props.onToggleHidden(t)},e}Object(g.a)(e,t);var i=e.prototype;return i.getHandlers=function(){return{reply:this.handleMention,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleMention,open:this.handleOpen,openProfile:this.handleOpenProfile,moveUp:this.handleMoveUp,moveDown:this.handleMoveDown,toggleHidden:this.handleHotkeyToggleHidden}},i.renderFollow=function(t,e,i){var n=this.props,o=n.intl,a=n.unread;return Object(h.a)(I.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:G()("notification notification-follow focusable",{unread:a}),tabIndex:"0","aria-label":V(o,o.formatMessage(J.follow,{name:e.get("acct")}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(E.a,{id:"user-plus",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(x.b,{id:"notification.follow",defaultMessage:"{name} followed you",values:{name:i}}))),Object(h.a)(H.a,{id:e.get("id"),hidden:this.props.hidden})))},i.renderFollowRequest=function(t,e,i){var n=this.props,o=n.intl,a=n.unread;return Object(h.a)(I.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:G()("notification notification-follow-request focusable",{unread:a}),tabIndex:"0","aria-label":V(o,o.formatMessage({id:"notification.follow_request",defaultMessage:"{name} has requested to follow you"},{name:e.get("acct")}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(E.a,{id:"user",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(x.b,{id:"notification.follow_request",defaultMessage:"{name} has requested to follow you",values:{name:i}}))),Object(h.a)(K,{id:e.get("id"),withNote:!1,hidden:this.props.hidden})))},i.renderMention=function(t){return Object(h.a)(F.a,{id:t.get("status"),withDismiss:!0,hidden:this.props.hidden,onMoveDown:this.handleMoveDown,onMoveUp:this.handleMoveUp,contextType:"notifications",getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth,unread:this.props.unread})},i.renderFavourite=function(t,e){var i=this.props,n=i.intl,o=i.unread;return Object(h.a)(I.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:G()("notification notification-favourite focusable",{unread:o}),tabIndex:"0","aria-label":V(n,n.formatMessage(J.favourite,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(E.a,{id:"star",className:"star-icon",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(x.b,{id:"notification.favourite",defaultMessage:"{name} favourited your status",values:{name:e}}))),Object(h.a)(F.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:!!this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},i.renderReblog=function(t,e){var i=this.props,n=i.intl,o=i.unread;return Object(h.a)(I.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:G()("notification notification-reblog focusable",{unread:o}),tabIndex:"0","aria-label":V(n,n.formatMessage(J.reblog,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(E.a,{id:"retweet",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(x.b,{id:"notification.reblog",defaultMessage:"{name} boosted your status",values:{name:e}}))),Object(h.a)(F.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},i.renderStatus=function(t,e){var i=this.props,n=i.intl,o=i.unread;return Object(h.a)(I.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:G()("notification notification-status focusable",{unread:o}),tabIndex:"0","aria-label":V(n,n.formatMessage(J.status,{name:t.getIn(["account","acct"])}),t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(E.a,{id:"home",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,Object(h.a)(x.b,{id:"notification.status",defaultMessage:"{name} just posted",values:{name:e}}))),Object(h.a)(F.a,{id:t.get("status"),account:t.get("account"),muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},i.renderPoll=function(t,e){var i=this.props,n=i.intl,o=i.unread,a=W.m===e.get("id"),s=a?n.formatMessage(J.ownPoll):n.formatMessage(J.poll);return Object(h.a)(I.HotKeys,{handlers:this.getHandlers()},void 0,Object(h.a)("div",{className:G()("notification notification-poll focusable",{unread:o}),tabIndex:"0","aria-label":V(n,s,t.get("created_at"))},void 0,Object(h.a)("div",{className:"notification__message"},void 0,Object(h.a)("div",{className:"notification__favourite-icon-wrapper"},void 0,Object(h.a)(E.a,{id:"tasks",fixedWidth:!0})),Object(h.a)("span",{title:t.get("created_at")},void 0,a?Object(h.a)(x.b,{id:"notification.own_poll",defaultMessage:"Your poll has ended"}):Object(h.a)(x.b,{id:"notification.poll",defaultMessage:"A poll you have voted in has ended"}))),Object(h.a)(F.a,{id:t.get("status"),account:e,muted:!0,withDismiss:!0,hidden:this.props.hidden,getScrollPosition:this.props.getScrollPosition,updateScrollBottom:this.props.updateScrollBottom,cachedMediaWidth:this.props.cachedMediaWidth,cacheMediaWidth:this.props.cacheMediaWidth})))},i.render=function(){var t=this.props.notification,e=t.get("account"),i={__html:e.get("display_name_html")},n=Object(h.a)("bdi",{},void 0,Object(h.a)(A.a,{className:"notification__display-name",href:e.get("url"),title:e.get("acct"),to:"/accounts/"+e.get("id"),dangerouslySetInnerHTML:i}));switch(t.get("type")){case"follow":return this.renderFollow(t,e,n);case"follow_request":return this.renderFollowRequest(t,e,n);case"mention":return this.renderMention(t);case"favourite":return this.renderFavourite(t,n);case"reblog":return this.renderReblog(t,n);case"status":return this.renderStatus(t,n);case"poll":return this.renderPoll(t,e)}return null},e}(R.a),c.contextTypes={router:q.a.object},c.propTypes={notification:N.a.map.isRequired,hidden:q.a.bool,onMoveUp:q.a.func.isRequired,onMoveDown:q.a.func.isRequired,onMention:q.a.func.isRequired,onFavourite:q.a.func.isRequired,onReblog:q.a.func.isRequired,onToggleHidden:q.a.func.isRequired,status:N.a.map,intl:q.a.object.isRequired,getScrollPosition:q.a.func,updateScrollBottom:q.a.func,cacheMediaWidth:q.a.func,cachedMediaWidth:q.a.number,unread:q.a.bool},s=l))||s,X=i(66),Z=i(10),$=i(22),tt=i(30),et=Object(O.connect)((function(){var t=Object(k.e)(),e=Object(k.g)();return function(i,n){var o=t(i,n.notification,n.accountId);return{notification:o,status:o.get("status")?e(i,{id:o.get("status")}):null}}}),(function(t){return{onMention:function(e,i){t(Object(Z.gb)(e,i))},onModalReblog(e,i){t(Object($.v)(e,i))},onReblog(e,i){e.get("reblogged")?t(Object($.z)(e)):i.shiftKey||!W.b?this.onModalReblog(e):t(Object(X.d)({status:e,onReblog:this.onModalReblog}))},onFavourite(e){e.get("favourited")?t(Object($.x)(e)):t(Object($.r)(e))},onToggleHidden(e){e.get("hidden")?t(Object(tt.l)(e.get("id"))):t(Object(tt.j)(e.get("id")))}}}))(Q),it=function(t){function e(){return t.apply(this,arguments)||this}return Object(g.a)(e,t),e.prototype.render=function(){return Object(h.a)("button",{className:"text-btn column-header__setting-btn",tabIndex:"0",onClick:this.props.onClick},void 0,Object(h.a)(E.a,{id:"eraser"})," ",Object(h.a)(x.b,{id:"notifications.clear",defaultMessage:"Clear notifications"}))},e}(j.a.PureComponent),nt=function(t){function e(){return t.apply(this,arguments)||this}return Object(g.a)(e,t),e.prototype.render=function(){return Object(h.a)("button",{className:"text-btn column-header__permission-btn",tabIndex:"0",onClick:this.props.onClick},void 0,Object(h.a)(x.b,{id:"notifications.grant_permission",defaultMessage:"Grant permission."}))},e}(j.a.PureComponent),ot=i(809),at=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).onPushChange=function(t,i){e.props.onChange(["push"].concat(t),i)},e}return Object(g.a)(e,t),e.prototype.render=function(){var t=this.props,e=t.settings,i=t.pushSettings,n=t.onChange,o=t.onClear,a=t.alertsEnabled,s=t.browserSupport,c=t.browserPermission,l=t.onRequestNotificationPermission,r=Object(h.a)(x.b,{id:"notifications.column_settings.filter_bar.show",defaultMessage:"Show"}),d=Object(h.a)(x.b,{id:"notifications.column_settings.filter_bar.advanced",defaultMessage:"Display all categories"}),u=Object(h.a)(x.b,{id:"notifications.column_settings.alert",defaultMessage:"Desktop notifications"}),f=Object(h.a)(x.b,{id:"notifications.column_settings.show",defaultMessage:"Show in column"}),b=Object(h.a)(x.b,{id:"notifications.column_settings.sound",defaultMessage:"Play sound"}),g=i.get("browserSupport")&&i.get("isSubscribed"),p=g&&Object(h.a)(x.b,{id:"notifications.column_settings.push",defaultMessage:"Push notifications"});return Object(h.a)("div",{},void 0,a&&s&&"denied"===c&&Object(h.a)("div",{className:"column-settings__row column-settings__row--with-margin"},void 0,Object(h.a)("span",{className:"warning-hint"},void 0,Object(h.a)(x.b,{id:"notifications.permission_denied",defaultMessage:"Desktop notifications are unavailable due to previously denied browser permissions request"}))),a&&s&&"default"===c&&Object(h.a)("div",{className:"column-settings__row column-settings__row--with-margin"},void 0,Object(h.a)("span",{className:"warning-hint"},void 0,Object(h.a)(x.b,{id:"notifications.permission_required",defaultMessage:"Desktop notifications are unavailable because the required permission has not been granted."})," ",Object(h.a)(nt,{onClick:l}))),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(it,{onClick:o})),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-unread-markers"},void 0,Object(h.a)("span",{id:"notifications-unread-markers",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.unread_markers.category",defaultMessage:"Unread notification markers"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{id:"unread-notification-markers",prefix:"notifications",settings:e,settingPath:["showUnread"],onChange:n,label:r}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-filter-bar"},void 0,Object(h.a)("span",{id:"notifications-filter-bar",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.filter_bar.category",defaultMessage:"Quick filter bar"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{id:"show-filter-bar",prefix:"notifications",settings:e,settingPath:["quickFilter","show"],onChange:n,label:r}),Object(h.a)(ot.a,{id:"show-filter-bar",prefix:"notifications",settings:e,settingPath:["quickFilter","advanced"],onChange:n,label:d}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-follow"},void 0,Object(h.a)("span",{id:"notifications-follow",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.follow",defaultMessage:"New followers:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","follow"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","follow"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","follow"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","follow"],onChange:n,label:b}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-follow-request"},void 0,Object(h.a)("span",{id:"notifications-follow-request",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.follow_request",defaultMessage:"New follow requests:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","follow_request"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","follow_request"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","follow_request"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","follow_request"],onChange:n,label:b}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-favourite"},void 0,Object(h.a)("span",{id:"notifications-favourite",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.favourite",defaultMessage:"Favourites:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","favourite"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","favourite"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","favourite"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","favourite"],onChange:n,label:b}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-mention"},void 0,Object(h.a)("span",{id:"notifications-mention",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.mention",defaultMessage:"Mentions:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","mention"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","mention"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","mention"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","mention"],onChange:n,label:b}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-reblog"},void 0,Object(h.a)("span",{id:"notifications-reblog",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.reblog",defaultMessage:"Boosts:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","reblog"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","reblog"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","reblog"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","reblog"],onChange:n,label:b}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-poll"},void 0,Object(h.a)("span",{id:"notifications-poll",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.poll",defaultMessage:"Poll results:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","poll"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","poll"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","poll"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","poll"],onChange:n,label:b}))),Object(h.a)("div",{role:"group","aria-labelledby":"notifications-status"},void 0,Object(h.a)("span",{id:"notifications-status",className:"column-settings__section"},void 0,Object(h.a)(x.b,{id:"notifications.column_settings.status",defaultMessage:"New toots:"})),Object(h.a)("div",{className:"column-settings__row"},void 0,Object(h.a)(ot.a,{disabled:"denied"===c,prefix:"notifications_desktop",settings:e,settingPath:["alerts","status"],onChange:n,label:u}),g&&Object(h.a)(ot.a,{prefix:"notifications_push",settings:i,settingPath:["alerts","status"],onChange:this.onPushChange,label:p}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["shows","status"],onChange:n,label:f}),Object(h.a)(ot.a,{prefix:"notifications",settings:e,settingPath:["sounds","status"],onChange:n,label:b}))))},e}(j.a.PureComponent),st=i(45),ct=i(97),lt=i(21),rt=i(34),dt=Object(x.f)({clearMessage:{id:"notifications.clear_confirmation",defaultMessage:"Are you sure you want to permanently clear all your notifications?"},clearConfirm:{id:"notifications.clear",defaultMessage:"Clear notifications"},permissionDenied:{id:"notifications.permission_denied_alert",defaultMessage:"Desktop notifications can't be enabled, as browser permission has been denied before"}}),ut=Object(x.g)(Object(O.connect)((function(t){return{settings:t.getIn(["settings","notifications"]),pushSettings:t.get("push_notifications"),alertsEnabled:t.getIn(["settings","notifications","alerts"]).includes(!0),browserSupport:t.getIn(["notifications","browserSupport"]),browserPermission:t.getIn(["notifications","browserPermission"])}}),(function(t,e){var i=e.intl;return{onChange(e,i){"push"===e[0]?i&&void 0!==window.Notification&&"granted"!==Notification.permission?t(Object(M.s)((function(n){t("granted"===n?Object(ct.e)(e.slice(1),i):Object(rt.e)(void 0,dt.permissionDenied))}))):t(Object(ct.e)(e.slice(1),i)):"quickFilter"===e[0]?(t(Object(st.c)(["notifications"].concat(e),i)),t(Object(M.u)("all"))):"alerts"===e[0]&&i&&void 0!==window.Notification&&"granted"!==Notification.permission&&i&&void 0!==window.Notification&&"granted"!==Notification.permission?t(Object(M.s)((function(n){t("granted"===n?Object(st.c)(["notifications"].concat(e),i):Object(rt.e)(void 0,dt.permissionDenied))}))):t(Object(st.c)(["notifications"].concat(e),i))},onClear(){t(Object(lt.d)("CONFIRM",{message:i.formatMessage(dt.clearMessage),confirm:i.formatMessage(dt.clearConfirm),onConfirm:function(){return t(Object(M.n)())}}))},onRequestNotificationPermission(){t(Object(M.s)())}}}))(at)),ft=Object(x.f)({mentions:{id:"notifications.filter.mentions",defaultMessage:"Mentions"},favourites:{id:"notifications.filter.favourites",defaultMessage:"Favourites"},boosts:{id:"notifications.filter.boosts",defaultMessage:"Boosts"},polls:{id:"notifications.filter.polls",defaultMessage:"Poll results"},follows:{id:"notifications.filter.follows",defaultMessage:"Follows"},statuses:{id:"notifications.filter.statuses",defaultMessage:"Updates from people you follow"}}),bt=Object(x.g)(r=function(t){function e(){return t.apply(this,arguments)||this}Object(g.a)(e,t);var i=e.prototype;return i.onClick=function(t){var e=this;return function(){return e.props.selectFilter(t)}},i.render=function(){var t=this.props,e=t.selectedFilter,i=t.advancedMode,n=t.intl;return i?Object(h.a)("div",{className:"notification__filter-bar"},void 0,Object(h.a)("button",{className:"all"===e?"active":"",onClick:this.onClick("all")},void 0,Object(h.a)(x.b,{id:"notifications.filter.all",defaultMessage:"All"})),Object(h.a)("button",{className:"mention"===e?"active":"",onClick:this.onClick("mention"),title:n.formatMessage(ft.mentions)},void 0,Object(h.a)(E.a,{id:"reply-all",fixedWidth:!0})),Object(h.a)("button",{className:"favourite"===e?"active":"",onClick:this.onClick("favourite"),title:n.formatMessage(ft.favourites)},void 0,Object(h.a)(E.a,{id:"star",fixedWidth:!0})),Object(h.a)("button",{className:"reblog"===e?"active":"",onClick:this.onClick("reblog"),title:n.formatMessage(ft.boosts)},void 0,Object(h.a)(E.a,{id:"retweet",fixedWidth:!0})),Object(h.a)("button",{className:"poll"===e?"active":"",onClick:this.onClick("poll"),title:n.formatMessage(ft.polls)},void 0,Object(h.a)(E.a,{id:"tasks",fixedWidth:!0})),Object(h.a)("button",{className:"status"===e?"active":"",onClick:this.onClick("status"),title:n.formatMessage(ft.statuses)},void 0,Object(h.a)(E.a,{id:"home",fixedWidth:!0})),Object(h.a)("button",{className:"follow"===e?"active":"",onClick:this.onClick("follow"),title:n.formatMessage(ft.follows)},void 0,Object(h.a)(E.a,{id:"user-plus",fixedWidth:!0}))):Object(h.a)("div",{className:"notification__filter-bar"},void 0,Object(h.a)("button",{className:"all"===e?"active":"",onClick:this.onClick("all")},void 0,Object(h.a)(x.b,{id:"notifications.filter.all",defaultMessage:"All"})),Object(h.a)("button",{className:"mention"===e?"active":"",onClick:this.onClick("mention")},void 0,Object(h.a)(x.b,{id:"notifications.filter.mentions",defaultMessage:"Mentions"})))},e}(j.a.PureComponent))||r,ht=Object(O.connect)((function(t){return{selectedFilter:t.getIn(["settings","notifications","quickFilter","active"]),advancedMode:t.getIn(["settings","notifications","quickFilter","advanced"])}}),(function(t){return{selectFilter(e){t(Object(M.u)(e))}}}))(bt),gt=i(58),pt=i(4),mt=i(203),vt=i(367),jt=i(31),Ot=i(49),_t=Object(x.f)({close:{id:"lightbox.close",defaultMessage:"Close"}}),wt=Object(O.connect)()(d=Object(x.g)(d=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).handleClick=function(){e.props.dispatch(Object(M.s)())},e.handleClose=function(){e.props.dispatch(Object(st.c)(["notifications","dismissPermissionBanner"],!0))},e}return Object(g.a)(e,t),e.prototype.render=function(){var t=this.props.intl;return Object(h.a)("div",{className:"notifications-permission-banner"},void 0,Object(h.a)("div",{className:"notifications-permission-banner__close"},void 0,Object(h.a)(U.a,{icon:"times",onClick:this.handleClose,title:t.formatMessage(_t.close)})),Object(h.a)("h2",{},void 0,Object(h.a)(x.b,{id:"notifications_permission_banner.title",defaultMessage:"Never miss a thing"})),Object(h.a)("p",{},void 0,Object(h.a)(x.b,{id:"notifications_permission_banner.how_to_control",defaultMessage:"To receive notifications when Mastodon isn't open, enable desktop notifications. You can control precisely which types of interactions generate desktop notifications through the {icon} button above once they're enabled.",values:{icon:Object(h.a)(E.a,{id:"sliders"})}})),Object(h.a)(Ot.a,{onClick:this.handleClick},void 0,Object(h.a)(x.b,{id:"notifications_permission_banner.enable",defaultMessage:"Enable desktop notifications"})))},e}(j.a.PureComponent))||d)||d,Mt=Object(x.f)({title:{id:"column.notifications",defaultMessage:"Notifications"},markAsRead:{id:"notifications.mark_as_read",defaultMessage:"Mark every notification as read"}}),Ct=Object(gt.a)([function(t){return t.getIn(["settings","notifications","shows"])}],(function(t){return Object(pt.List)(t.filter((function(t){return!t})).keys())})),yt=Object(gt.a)([function(t){return t.getIn(["settings","notifications","quickFilter","show"])},function(t){return t.getIn(["settings","notifications","quickFilter","active"])},Ct,function(t){return t.getIn(["notifications","items"])}],(function(t,e,i,n){return t&&"all"!==e?n.filter((function(t){return null===t||e===t.get("type")})):n.filterNot((function(t){return null!==t&&i.includes(t.get("type"))}))})),kt=Object(O.connect)((function(t){return{showFilterBar:t.getIn(["settings","notifications","quickFilter","show"]),notifications:yt(t),isLoading:t.getIn(["notifications","isLoading"],!0),isUnread:t.getIn(["notifications","unread"])>0||t.getIn(["notifications","pendingItems"]).size>0,hasMore:t.getIn(["notifications","hasMore"]),numPending:t.getIn(["notifications","pendingItems"],Object(pt.List)()).size,lastReadId:t.getIn(["settings","notifications","showUnread"])?t.getIn(["notifications","readMarkerId"]):"0",canMarkAsRead:t.getIn(["settings","notifications","showUnread"])&&"0"!==t.getIn(["notifications","readMarkerId"])&&yt(t).some((function(e){return null!==e&&Object(jt.a)(e.get("id"),t.getIn(["notifications","readMarkerId"]))>0})),needsNotificationPermission:t.getIn(["settings","notifications","alerts"]).includes(!0)&&t.getIn(["notifications","browserSupport"])&&"default"===t.getIn(["notifications","browserPermission"])&&!t.getIn(["settings","notifications","dismissPermissionBanner"])}}))(u=Object(x.g)((b=f=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).handleLoadGap=function(t){e.props.dispatch(Object(M.o)({maxId:t}))},e.handleLoadOlder=m()((function(){var t=e.props.notifications.last();e.props.dispatch(Object(M.o)({maxId:t&&t.get("id")}))}),300,{leading:!0}),e.handleLoadPending=function(){e.props.dispatch(Object(M.p)())},e.handleScrollToTop=m()((function(){e.props.dispatch(Object(M.t)(!0))}),100),e.handleScroll=m()((function(){e.props.dispatch(Object(M.t)(!1))}),100),e.handlePin=function(){var t=e.props,i=t.columnId,n=t.dispatch;n(i?Object(y.h)(i):Object(y.e)("NOTIFICATIONS",{}))},e.handleMove=function(t){var i=e.props,n=i.columnId;(0,i.dispatch)(Object(y.g)(n,t))},e.handleHeaderClick=function(){e.column.scrollTop()},e.setColumnRef=function(t){e.column=t},e.handleMoveUp=function(t){var i=e.props.notifications.findIndex((function(e){return null!==e&&e.get("id")===t}))-1;e._selectChild(i,!0)},e.handleMoveDown=function(t){var i=e.props.notifications.findIndex((function(e){return null!==e&&e.get("id")===t}))+1;e._selectChild(i,!1)},e.handleMarkAsRead=function(){e.props.dispatch(Object(M.q)()),e.props.dispatch(Object(C.d)({immediate:!0}))},e}Object(g.a)(e,t);var i=e.prototype;return i.componentWillMount=function(){this.props.dispatch(Object(M.r)())},i.componentWillUnmount=function(){this.handleLoadOlder.cancel(),this.handleScrollToTop.cancel(),this.handleScroll.cancel(),this.props.dispatch(Object(M.t)(!1)),this.props.dispatch(Object(M.w)())},i._selectChild=function(t,e){var i=this.column.node,n=i.querySelector("article:nth-of-type("+(t+1)+") .focusable");n&&(e&&i.scrollTop>n.offsetTop?n.scrollIntoView(!0):!e&&i.scrollTop+i.clientHeight<n.offsetTop+n.offsetHeight&&n.scrollIntoView(!1),n.focus())},i.render=function(){var t=this,e=this.props,i=e.intl,n=e.notifications,o=e.shouldUpdateScroll,a=e.isLoading,s=e.isUnread,c=e.columnId,l=e.multiColumn,r=e.hasMore,d=e.numPending,u=e.showFilterBar,f=e.lastReadId,b=e.canMarkAsRead,g=e.needsNotificationPermission,p=!!c,m=Object(h.a)(x.b,{id:"empty_column.notifications",defaultMessage:"You don't have any notifications yet. When other people interact with you, you will see it here."}),v=null,O=u?Object(h.a)(ht,{}):null;v=a&&this.scrollableContent?this.scrollableContent:n.size>0||r?n.map((function(e,i){return null===e?Object(h.a)(vt.a,{disabled:a,maxId:i>0?n.getIn([i-1,"id"]):null,onClick:t.handleLoadGap},"gap:"+n.getIn([i+1,"id"])):Object(h.a)(et,{notification:e,accountId:e.get("account"),onMoveUp:t.handleMoveUp,onMoveDown:t.handleMoveDown,unread:"0"!==f&&Object(jt.a)(e.get("id"),f)>0},e.get("id"))})):null,this.scrollableContent=v;var M=Object(h.a)(mt.a,{scrollKey:"notifications-"+c,trackScroll:!p,isLoading:a,showLoading:a&&0===n.size,hasMore:r,numPending:d,prepend:g&&Object(h.a)(wt,{}),alwaysPrepend:!0,emptyMessage:m,onLoadMore:this.handleLoadOlder,onLoadPending:this.handleLoadPending,onScrollToTop:this.handleScrollToTop,onScroll:this.handleScroll,shouldUpdateScroll:o,bindToDocument:!l},void 0,v),C=null;return b&&(C=Object(h.a)("button",{"aria-label":i.formatMessage(Mt.markAsRead),title:i.formatMessage(Mt.markAsRead),onClick:this.handleMarkAsRead,className:"column-header__button"},void 0,Object(h.a)(E.a,{id:"check"}))),j.a.createElement(_.a,{bindToDocument:!l,ref:this.setColumnRef,label:i.formatMessage(Mt.title)},Object(h.a)(w.a,{icon:"bell",active:s,title:i.formatMessage(Mt.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:p,multiColumn:l,extraButton:C},void 0,Object(h.a)(ut,{})),O,M)},e}(j.a.PureComponent),f.defaultProps={trackScroll:!0},u=b))||u)||u}}]);
//# sourceMappingURL=notifications-aa9c2576cb8abc2652e4.chunk.js.map