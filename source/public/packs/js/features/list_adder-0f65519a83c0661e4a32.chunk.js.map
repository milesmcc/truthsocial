{"version":3,"sources":["webpack:///./app/javascript/mastodon/features/list_adder/components/list.js","webpack:///./app/javascript/mastodon/features/list_adder/components/account.js","webpack:///./app/javascript/mastodon/features/list_adder/index.js"],"names":["messages","defineMessages","remove","add","List","connect","state","listId","added","list","get","getIn","includes","dispatch","onRemove","removeFromListAdder","onAdd","addToListAdder","injectIntl","render","button","this","props","intl","icon","title","formatMessage","onClick","className","id","fixedWidth","ImmutablePureComponent","propTypes","ImmutablePropTypes","map","isRequired","PropTypes","object","func","bool","defaultProps","Account","getAccount","makeGetAccount","accountId","account","size","getOrderedLists","createSelector","lists","toList","filter","item","sort","a","b","localeCompare","ListAdder","listIds","onInitialize","setupListAdder","onReset","resetListAdder","componentDidMount","componentWillUnmount","ListId","string","onClose"],"mappings":"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","file":"js/features/list_adder-0f65519a83c0661e4a32.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport IconButton from '../../../components/icon_button';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { removeFromListAdder, addToListAdder } from '../../../actions/lists';\nimport Icon from 'mastodon/components/icon';\n\nconst messages = defineMessages({\n  remove: { id: 'lists.account.remove', defaultMessage: 'Remove from list' },\n  add: { id: 'lists.account.add', defaultMessage: 'Add to list' },\n});\n\nconst MapStateToProps = (state, { listId, added }) => ({\n  list: state.get('lists').get(listId),\n  added: typeof added === 'undefined' ? state.getIn(['listAdder', 'lists', 'items']).includes(listId) : added,\n});\n\nconst mapDispatchToProps = (dispatch, { listId }) => ({\n  onRemove: () => dispatch(removeFromListAdder(listId)),\n  onAdd: () => dispatch(addToListAdder(listId)),\n});\n\nexport default @connect(MapStateToProps, mapDispatchToProps)\n@injectIntl\nclass List extends ImmutablePureComponent {\n\n  static propTypes = {\n    list: ImmutablePropTypes.map.isRequired,\n    intl: PropTypes.object.isRequired,\n    onRemove: PropTypes.func.isRequired,\n    onAdd: PropTypes.func.isRequired,\n    added: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    added: false,\n  };\n\n  render () {\n    const { list, intl, onRemove, onAdd, added } = this.props;\n\n    let button;\n\n    if (added) {\n      button = <IconButton icon='times' title={intl.formatMessage(messages.remove)} onClick={onRemove} />;\n    } else {\n      button = <IconButton icon='plus' title={intl.formatMessage(messages.add)} onClick={onAdd} />;\n    }\n\n    return (\n      <div className='list'>\n        <div className='list__wrapper'>\n          <div className='list__display-name'>\n            <Icon id='list-ul' className='column-link__icon' fixedWidth />\n            {list.get('title')}\n          </div>\n\n          <div className='account__relationship'>\n            {button}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { makeGetAccount } from '../../../selectors';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport Avatar from '../../../components/avatar';\nimport DisplayName from '../../../components/display_name';\nimport { injectIntl } from 'react-intl';\n\nconst makeMapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  const mapStateToProps = (state, { accountId }) => ({\n    account: getAccount(state, accountId),\n  });\n\n  return mapStateToProps;\n};\n\n\nexport default @connect(makeMapStateToProps)\n@injectIntl\nclass Account extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map.isRequired,\n  };\n\n  render () {\n    const { account } = this.props;\n    return (\n      <div className='account'>\n        <div className='account__wrapper'>\n          <div className='account__display-name'>\n            <div className='account__avatar-wrapper'><Avatar account={account} size={36} /></div>\n            <DisplayName account={account} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { injectIntl } from 'react-intl';\nimport { setupListAdder, resetListAdder } from '../../actions/lists';\nimport { createSelector } from 'reselect';\nimport List from './components/list';\nimport Account from './components/account';\nimport NewListForm from '../lists/components/new_list_form';\n// hack\n\nconst getOrderedLists = createSelector([state => state.get('lists')], lists => {\n  if (!lists) {\n    return lists;\n  }\n\n  return lists.toList().filter(item => !!item).sort((a, b) => a.get('title').localeCompare(b.get('title')));\n});\n\nconst mapStateToProps = state => ({\n  listIds: getOrderedLists(state).map(list=>list.get('id')),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onInitialize: accountId => dispatch(setupListAdder(accountId)),\n  onReset: () => dispatch(resetListAdder()),\n});\n\nexport default @connect(mapStateToProps, mapDispatchToProps)\n@injectIntl\nclass ListAdder extends ImmutablePureComponent {\n\n  static propTypes = {\n    accountId: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    onInitialize: PropTypes.func.isRequired,\n    onReset: PropTypes.func.isRequired,\n    listIds: ImmutablePropTypes.list.isRequired,\n  };\n\n  componentDidMount () {\n    const { onInitialize, accountId } = this.props;\n    onInitialize(accountId);\n  }\n\n  componentWillUnmount () {\n    const { onReset } = this.props;\n    onReset();\n  }\n\n  render () {\n    const { accountId, listIds } = this.props;\n\n    return (\n      <div className='modal-root__modal list-adder'>\n        <div className='list-adder__account'>\n          <Account accountId={accountId} />\n        </div>\n\n        <NewListForm />\n\n\n        <div className='list-adder__lists'>\n          {listIds.map(ListId => <List key={ListId} listId={ListId} />)}\n        </div>\n      </div>\n    );\n  }\n\n}\n"],"sourceRoot":""}