(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{1076:function(e,t){e.exports=function(){}},852:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return K}));var n,o,i,r=a(0),s=a(5),c=a(1),d=a.n(c),l=a(9),u=a(53),p=a(20),h=a(2),b=a.n(h),g=a(16),m=a.n(g),f=a(35),v=a(3),O=a(210),j=a.n(O),w=a(1076),_=a.n(w),y=a(81),C=a(18),k=a(112),I=function(e){function t(){return e.apply(this,arguments)||this}return Object(s.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.status,a=e.checked,n=e.onToggle,o=e.disabled,i=null;if(t.get("reblog"))return null;if(t.get("media_attachments").size>0)if(t.get("media_attachments").some((function(e){return"unknown"===e.get("type")})));else if("video"===t.getIn(["media_attachments",0,"type"])){var s=t.getIn(["media_attachments",0]);i=Object(r.a)(k.a,{fetchComponent:C.N,loading:this.renderLoadingVideoPlayer},void 0,(function(e){return Object(r.a)(e,{preview:s.get("preview_url"),blurhash:s.get("blurhash"),src:s.get("url"),alt:s.get("description"),width:239,height:110,inline:!0,sensitive:t.get("sensitive"),onOpenVideo:_.a})}))}else i=Object(r.a)(k.a,{fetchComponent:C.C,loading:this.renderLoadingMediaGallery},void 0,(function(e){return Object(r.a)(e,{media:t.get("media_attachments"),sensitive:t.get("sensitive"),height:110,onOpenMedia:_.a})}));return Object(r.a)("div",{className:"status-check-box"},void 0,Object(r.a)("div",{className:"status-check-box__status"},void 0,Object(r.a)(y.a,{status:t}),i),Object(r.a)("div",{className:"status-check-box-toggle"},void 0,Object(r.a)(j.a,{checked:a,onChange:n,disabled:o})))},t}(d.a.PureComponent),M=a(4),N=Object(l.connect)((function(e,t){var a=t.id;return{status:e.getIn(["statuses",a]),checked:e.getIn(["reports","new","status_ids"],Object(M.Set)()).includes(a)}}),(function(e,t){var a=t.id;return{onToggle(t){e(Object(u.m)(a,t.target.checked))}}}))(I),S=a(17),x=a(49),R=a(19),F=Object(v.f)({close:{id:"lightbox.close",defaultMessage:"Close"},placeholder:{id:"report.placeholder",defaultMessage:"Additional comments"},submit:{id:"report.submit",defaultMessage:"Submit"}}),K=Object(l.connect)((function(){var e=Object(f.d)();return function(t){var a=t.getIn(["reports","new","account_id"]);return{isSubmitting:t.getIn(["reports","new","isSubmitting"]),account:e(t,a),comment:t.getIn(["reports","new","comment"]),forward:t.getIn(["reports","new","forward"]),statusIds:Object(M.OrderedSet)(t.getIn(["timelines","account:"+a+":with_replies","items"])).union(t.getIn(["reports","new","status_ids"]))}}}))(n=Object(v.g)((i=o=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).handleCommentChange=function(e){t.props.dispatch(Object(u.i)(e.target.value))},t.handleForwardChange=function(e){t.props.dispatch(Object(u.j)(e.target.checked))},t.handleSubmit=function(){t.props.dispatch(Object(u.l)())},t.handleKeyDown=function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)&&t.handleSubmit()},t}Object(s.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){this.props.dispatch(Object(p.r)(this.props.account.get("id"),{withReplies:!0}))},a.componentWillReceiveProps=function(e){this.props.account!==e.account&&e.account&&this.props.dispatch(Object(p.r)(e.account.get("id"),{withReplies:!0}))},a.render=function(){var e=this.props,t=e.account,a=e.comment,n=e.intl,o=e.statusIds,i=e.isSubmitting,s=e.forward,c=e.onClose;if(!t)return null;var d=t.get("acct").split("@")[1];return Object(r.a)("div",{className:"modal-root__modal report-modal"},void 0,Object(r.a)("div",{className:"report-modal__target"},void 0,Object(r.a)(R.a,{className:"report-modal__close",title:n.formatMessage(F.close),icon:"times",onClick:c,size:20}),Object(r.a)(v.b,{id:"report.target",defaultMessage:"Report {target}",values:{target:Object(r.a)("strong",{},void 0,t.get("acct"))}})),Object(r.a)("div",{className:"report-modal__container"},void 0,Object(r.a)("div",{className:"report-modal__comment"},void 0,Object(r.a)("p",{},void 0,Object(r.a)(v.b,{id:"report.hint",defaultMessage:"The report will be sent to your server moderators. You can provide an explanation of why you are reporting this account below:"})),Object(r.a)("textarea",{className:"setting-text light",placeholder:n.formatMessage(F.placeholder),value:a,onChange:this.handleCommentChange,onKeyDown:this.handleKeyDown,disabled:i,autoFocus:!0}),d&&Object(r.a)("div",{},void 0,Object(r.a)("p",{},void 0,Object(r.a)(v.b,{id:"report.forward_hint",defaultMessage:"The account is from another server. Send an anonymized copy of the report there as well?"})),Object(r.a)("div",{className:"setting-toggle"},void 0,Object(r.a)(j.a,{id:"report-forward",checked:s,disabled:i,onChange:this.handleForwardChange}),Object(r.a)("label",{htmlFor:"report-forward",className:"setting-toggle__label"},void 0,Object(r.a)(v.b,{id:"report.forward",defaultMessage:"Forward to {target}",values:{target:d}})))),Object(r.a)(x.a,{disabled:i,text:n.formatMessage(F.submit),onClick:this.handleSubmit})),Object(r.a)("div",{className:"report-modal__statuses"},void 0,Object(r.a)("div",{},void 0,o.map((function(e){return Object(r.a)(N,{id:e,disabled:i},e)}))))))},t}(S.a),o.propTypes={isSubmitting:b.a.bool,account:m.a.map,statusIds:m.a.orderedSet.isRequired,comment:b.a.string.isRequired,forward:b.a.bool,dispatch:b.a.func.isRequired,intl:b.a.object.isRequired},n=i))||n)||n}}]);
//# sourceMappingURL=report_modal-38eff4616c60aca0254f.chunk.js.map