(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{1077:function(e,t,o){const r=o(922),{log:s}=o(888),a=o(887);let n=0;e.exports=()=>{const e=a("Scheduler",n),t={},o={};let i=[];n+=1;const c=()=>Object.keys(t).length,l=()=>{if(0!==i.length){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)if(void 0===o[e[r]]){i[0](t[e[r]]);break}}},p=(t,a)=>new Promise(((n,c)=>{const p=r({action:t,payload:a});i.push((async e=>{i.shift(),o[e.id]=p;try{n(await e[t].apply(this,[...a,p.id]))}catch(e){c(e)}finally{delete o[e.id],l()}})),s(`[${e}]: Add ${p.id} to JobQueue`),s(`[${e}]: JobQueue length=${i.length}`),l()}));return{addWorker:o=>(t[o.id]=o,s(`[${e}]: Add ${o.id}`),s(`[${e}]: Number of workers=${c()}`),l(),o.id),addJob:async(t,...o)=>{if(0===c())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return p(t,o)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),i=[]},getQueueLen:()=>i.length,getNumWorkers:c}}},1078:function(e,t,o){const r="browser"===o(1079)("type")?o(889):e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((o=>{void 0!==e[o]&&(t[o]=r(t[o]))})),t}},1079:function(e,t,o){(function(t){const r=o(1080);e.exports=e=>{const o={};return r()?o.type="electron":"object"==typeof window?o.type="browser":"function"==typeof importScripts?o.type="webworker":"object"==typeof t&&(o.type="node"),void 0===e?o:o[e]}}).call(this,o(177))},1080:function(e,t,o){(function(t){e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!(void 0===t||"object"!=typeof t.versions||!t.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}}).call(this,o(177))},1081:function(e,t){e.exports=e=>{const t=[],o=[],r=[],s=[],a=[];return e.blocks.forEach((n=>{n.paragraphs.forEach((t=>{t.lines.forEach((o=>{o.words.forEach((r=>{r.symbols.forEach((s=>{a.push({...s,page:e,block:n,paragraph:t,line:o,word:r})})),s.push({...r,page:e,block:n,paragraph:t,line:o})})),r.push({...o,page:e,block:n,paragraph:t})})),o.push({...t,page:e,block:n})})),t.push({...n,page:e})})),{...e,blocks:t,paragraphs:o,lines:r,words:s,symbols:a}}},1082:function(e,t,o){const r=o(924);e.exports={defaultOEM:r.DEFAULT}},1083:function(e,t,o){const r=o(1084),s=o(1087),a=o(1088),n=o(1089),i=o(1090),c=o(1091);e.exports={defaultOptions:r,spawnWorker:s,terminateWorker:a,onMessage:n,send:i,loadImage:c}},1084:function(e,t,o){(function(t){const r=o(889),{version:s,dependencies:a}=o(1085),n=o(1086);e.exports={...n,workerPath:void 0!==t&&"development"===t.env.TESS_ENV?r("/dist/worker.dev.js?nocache="+Math.random().toString(36).slice(3)):`https://unpkg.com/tesseract.js@v${s}/dist/worker.min.js`,corePath:`https://unpkg.com/tesseract.js-core@v${a["tesseract.js-core"].substring(1)}/tesseract-core.${"object"==typeof WebAssembly?"wasm":"asm"}.js`}}).call(this,o(177))},1085:function(e){e.exports=JSON.parse('{"name":"tesseract.js","version":"2.1.1","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","acorn":"^6.4.0","babel-loader":"^8.0.6","cors":"^2.8.5","eslint":"^5.16.0","eslint-config-airbnb":"^17.1.1","eslint-plugin-import":"^2.19.1","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-react":"^7.17.0","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^5.2.0","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","nyc":"^15.0.0","rimraf":"^2.7.1","wait-on":"^3.3.0","webpack":"^4.41.4","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.10","webpack-dev-middleware":"^3.7.2"},"dependencies":{"bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.2.0","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')},1086:function(e,t){e.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},1087:function(e,t){e.exports=({workerPath:e,workerBlobURL:t})=>{let o;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(t))}else o=new Worker(e);return o}},1088:function(e,t){e.exports=e=>{e.terminate()}},1089:function(e,t){e.exports=(e,t)=>{e.onmessage=({data:e})=>{t(e)}}},1090:function(e,t){e.exports=async(e,t)=>{e.postMessage(t)}},1091:function(e,t,o){const r=o(889),s=e=>new Promise(((t,o)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=({target:{error:{code:e}}})=>{o(Error("File could not be read! Code="+e))},r.readAsArrayBuffer(e)})),a=async e=>{let t=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))t=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const o=await fetch(r(e));t=await o.arrayBuffer()}else e instanceof HTMLElement?("IMG"===e.tagName&&(t=await a(e.src)),"VIDEO"===e.tagName&&(t=await a(e.poster)),"CANVAS"===e.tagName&&await new Promise((o=>{e.toBlob((async e=>{t=await s(e),o()}))}))):(e instanceof File||e instanceof Blob)&&(t=await s(e));return new Uint8Array(t)};e.exports=a},1092:function(e,t,o){const r=o(923);e.exports={recognize:async(e,t,o)=>{const s=r(o);return await s.load(),await s.loadLanguage(t),await s.initialize(t),s.recognize(e).finally((async()=>{await s.terminate()}))},detect:async(e,t)=>{const o=r(t);return await o.load(),await o.loadLanguage("osd"),await o.initialize("osd"),o.detect(e).finally((async()=>{await o.terminate()}))}}},1093:function(e,t){e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"}},841:function(e,t,o){o(545);const r=o(1077),s=o(923),a=o(1092),n=o(924),i=o(1093),{setLogging:c}=o(888);e.exports={OEM:n,PSM:i,createScheduler:r,createWorker:s,setLogging:c,...a}},887:function(e,t){e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},888:function(e,t){let o=!1;t.logging=o,t.setLogging=e=>{o=e},t.log=(...e)=>o?console.log.apply(this,e):null},889:function(e,t,o){var r,s;void 0===(s="function"==typeof(r=function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(t,o.firstChild);for(var r,s=document.createElement("a"),a=1;a<e;a++)s.href=arguments[a],r=s.href,t.href=r;return o.removeChild(t),r}return e})?r.call(t,o,t,e):r)||(e.exports=s)},922:function(e,t,o){const r=o(887);let s=0;e.exports=({id:e,action:t,payload:o={}})=>{let a=e;return void 0===a&&(a=r("Job",s),s+=1),{id:a,action:t,payload:o}}},923:function(e,t,o){const r=o(1078),s=o(1081),a=o(922),{log:n}=o(888),i=o(887),{defaultOEM:c}=o(1082),{defaultOptions:l,spawnWorker:p,terminateWorker:d,onMessage:u,loadImage:g,send:f}=o(1083);let h=0;e.exports=(e={})=>{const t=i("Worker",h),{logger:o,errorHandler:w,...m}=r({...l,...e}),b={},y={};let k=p(m);h+=1;const j=(e,t)=>{b[e]=t},v=(e,t)=>{y[e]=t},E=({id:e,action:o,payload:r})=>new Promise(((s,a)=>{n(`[${t}]: Start ${e}, action=${o}`),j(o,s),v(o,a),f(k,{workerId:t,jobId:e,action:o,payload:r})}));return u(k,(({workerId:e,jobId:t,status:r,action:a,data:i})=>{if("resolve"===r){n(`[${e}]: Complete ${t}`);let o=i;"recognize"===a?o=s(i):"getPDF"===a&&(o=Array.from({...i,length:Object.keys(i).length})),b[a]({jobId:t,data:o})}else if("reject"===r){if(y[a](i),!w)throw Error(i);w(i)}else"progress"===r&&o(i)})),{id:t,worker:k,setResolve:j,setReject:v,load:e=>E(a({id:e,action:"load",payload:{options:m}})),writeText:(e,t,o)=>E(a({id:o,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>E(a({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>E(a({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,o)=>E(a({id:o,action:"FS",payload:{method:e,args:t}})),loadLanguage:(e="eng",t)=>E(a({id:t,action:"loadLanguage",payload:{langs:e,options:m}})),initialize:(e="eng",t=c,o)=>E(a({id:o,action:"initialize",payload:{langs:e,oem:t}})),setParameters:(e={},t)=>E(a({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},o)=>E(a({id:o,action:"recognize",payload:{image:await g(e),options:t}})),getPDF:(e="Tesseract OCR Result",t=!1,o)=>E(a({id:o,action:"getPDF",payload:{title:e,textonly:t}})),detect:async(e,t)=>E(a({id:t,action:"detect",payload:{image:await g(e)}})),terminate:async()=>(null!==k&&(d(k),k=null),Promise.resolve())}}},924:function(e,t){e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}}}]);
//# sourceMappingURL=tesseract-38252e5717b25a1b171b.chunk.js.map